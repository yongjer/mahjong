# 🀄️ 台灣麻將 (16張) 計算器

基於 **Tauri v2**、**Rust** 和 **React** 開發的高效能桌面應用程式。本工具專為台灣 16 張麻將設計，可計算最佳捨牌、向聽數（距離聽牌的步數）以及進張數（有效牌）。

[English](./README.md)

## 🚀 功能特點

- **高效能核心**：使用 Rust 編寫的遞迴回溯（DFS）演算法，可在毫秒內完成向聽數計算。
- **互動式選牌介面**：透過現代化的點擊式 UI 建立手牌並追蹤場上已出現的牌，無需手動輸入字串。
- **台灣 16 張麻將邏輯**：針對「五副順子/刻子 + 一個對子」（摸牌後手牌 17 張）的贏牌條件進行優化。
- **即時分析**：根據以下維度提供捨牌建議列表：
  - **向聽數 (Shanten)**：進入聽牌/贏牌狀態所需的最少更換牌數。
  - **進張數 (Ukeire)**：牌堆中能改進手牌並縮減向聽數的精確剩餘張數。
- **原生 macOS 支援**：可封裝為獨立的 `.app` 和 `.dmg` 檔案。

## 🛠 技術棧

- **後端 (Backend)**：Rust (使用 `serde` 進行序列化與 `HashMap` 記憶化優化)。
- **前端 (Frontend)**：React + TypeScript (Vite)。
- **框架 (Framework)**：Tauri v2 (原生系統 WebView)。
- **套件管理**：Bun。

## 📦 安裝與建置

### 前置條件
- [Rust](https://www.rust-lang.org/)
- [Bun](https://bun.sh/)

### 開發模式
```bash
# 安裝依賴
bun install

# 啟動開發伺服器
bun run tauri dev
```

### 建置獨立應用程式 (macOS)
```bash
# 建置生產版本 (.app 與 .dmg)
bun run tauri build
```
產出檔案將位於 `src-tauri/target/release/bundle/macos/`。

## 🧠 演算法邏輯

計算器採用 **頻率表 (Frequency Table)** 方法（將 34 種牌型映射到其數量），確保 $O(1)$ 的查詢效能。向聽數計算使用經過 **記憶化 (Memoization)** 優化的遞迴回溯搜索，以避免重複的分支探索。

不同於常見的 13 張日麻 (Riichi) 計算器，本引擎從零開始構建，完全符合台灣 16 張麻將的規則（完整手牌由 5 副牌加 1 個眼組成）。

## 📝 使用說明

1. **輸入手牌**：在網格中點擊牌面，將剛好 17 張牌加入手牌。
2. **追蹤捨牌**：切換到「場上已現牌」模式，標記桌面上已經打出或看見的牌。
3. **進行分析**：點擊「分析手牌」查看建議列表。
4. **循環操作**：點擊手牌中的某張牌進行「捨棄」，然後加入新摸的牌以查看下一步的最佳動作。

---
*由 ❤️ 為麻將愛好者打造。*
